<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upload Report</title>
<style>
  body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:0 }
  .container { max-width:500px; margin:50px auto; background:#fff; padding:20px; border-radius:8px; box-shadow:0 4px 14px rgba(0,0,0,0.1) }
  h2 { text-align:center; color:rgb(138,1,92) }
  label { display:block; font-weight:600; margin-top:12px }
  input, select { width:90%; padding:10px; margin-top:6px; border:1px solid #ccc; border-radius:6px }
  button { margin-top:16px; width:100%; padding:10px; background:rgb(5,122,56); color:#fff; border:0; border-radius:6px; cursor:pointer; font-weight:600 }
</style>
</head>
<body>
<div class="container">
  <h2>Upload Report PDF</h2>
  <form id="reportForm" enctype="multipart/form-data">
    <label for="studentId">Student ID</label>
    <input type="number" id="studentId" name="studentId" required>

    <label for="reportFile">Select Report PDF</label>
    <input type="file" id="reportFile" name="report" accept="application/pdf" required>

    <button type="submit">Upload</button>
  </form>
</div>

<script>
const API_BASE = "http://localhost:5500";
const adminSecret = localStorage.getItem("adminSecret");

document.getElementById("reportForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const formData = new FormData();
  formData.append("studentId", document.getElementById("studentId").value);
  formData.append("report", document.getElementById("reportFile").files[0]);

  try {
    const res = await fetch(`${API_BASE}/admin/upload-report`, {
      method: "POST",
      headers: { "X-Admin-Secret": adminSecret },
      body: formData
    });
    if (res.ok) {
      alert("Report uploaded successfully!");
      e.target.reset();
    } else {
      alert("Error uploading report.");
    }
  } catch (err) {
    console.error(err);
    alert("Server error.");
  }
});
</script>
</body>
</html>
