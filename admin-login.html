<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
  }
  .login-box {
    background: #fff;
    padding: 24px;
    border-radius: 10px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 360px;
  }
  h2 {
    margin-top: 0;
    text-align: center;
    color: rgb(138,1,92);
  }
  label {
    display:block;
    margin-top:12px;
    font-weight:600;
  }
  input {
    width:100%;
    padding:10px;
    margin-top:6px;
    border:1px solid #ccc;
    border-radius:6px;
    font-size:14px;
    box-sizing:border-box;
  }
  button {
    width:100%;
    padding:10px;
    margin-top:16px;
    background:rgb(167, 109, 2);
    color:#fff;
    font-weight:600;
    border:0;
    border-radius:6px;
    cursor:pointer;
    font-size:15px;
  }
  button:hover { background:rgb(4,100,45); }
  .error {
    color: red;
    font-size: 14px;
    margin-top: 10px;
    text-align:center;
  }
</style>
</head>
<body>

<div class="login-box">
  <h2>Admin Login</h2>
  <form id="adminLoginForm">
    <label for="secret">Admin Secret</label>
    <input type="password" id="secret" placeholder="Enter Admin Secret" required>
    <button type="submit">Login</button>
  </form>
  <br>
    <button type="button" 
          onclick="window.location.href='index.html'" 
          style="background:#8a012a;color:#fff;padding:8px 14px;border:none;border-radius:6px;cursor:pointer">
     Go to Home Page
  </button>
  <div id="errorMsg" class="error"></div>
</div>

<script>
  const API_BASE = "http://localhost:5500";

  document.getElementById("adminLoginForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const secret = document.getElementById("secret").value.trim();

    try {
      // Test if secret is correct by calling a protected route
      const res = await fetch(`${API_BASE}/admin/schools`, {
        headers: { "X-Admin-Secret": secret }
      });

      if (res.ok) {
        localStorage.setItem("adminSecret", secret); // store for future requests
        window.location.href = "admin-dashboard.html";
      } else {
        document.getElementById("errorMsg").textContent = "Invalid admin secret!";
      }
    } catch (err) {
      console.error("Login error:", err);
      document.getElementById("errorMsg").textContent = "Server error. Try again.";
    }
  });
</script>

</body>
</html>
